<% if @comment.errors.any? %> 
  var $msg = $('<%= errors_msg_tag @comment %>');
  $msg.find('a.close').click(function(){
    $(this).parent().remove(); 
  });
  $("#comment-form-<%= @comment.idea.id %>").parent().before($msg);  
<% else %>
  var $form =$("#comment-form-<%= @comment.idea.id %>");
  var $comment = $('<%= escape_javascript( render(:partial => @comment )) %>').css("backgroundColor","#57A957");
  $form.parent().parent().hide().prev().show().before($comment);
  $comment.animate({
    backgroundColor:"#fff"
  },1500);
  $form[0].reset();
  $form.parent().prev().remove();
<% end %>
